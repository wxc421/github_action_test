# 并发事务可能产生的问题


- 当一个事务访问数据库的数据时，无论读、写，都不会产生并发问题。


- 当两个事务同时访问数据库中的相同数据时，可能有几种情况：

读：两个事务都查询数据。当两个事务对相同数据全部是读操作时，不会产生任何并发问题。
读+写：一个事务查询数据，一个事务修改数据。当两个事务对相同数据有读有写时，可能会产生脏读、不可重复度、幻读的问题（但发生脏读、不可重复度、幻读就并不一定表示有问题，具体还是要看场景，有些业务场景发生不可重复度是不允许的，但有些业务场景可能发生脏读也没啥大碍）。
写：两个事务都修改数据，当两个事务对相同数据全部是写操作时，可能产生数据丢失（回滚丢失、覆盖丢失）等问题。

多个事务同时访问数据库中相同的数据，也是一样的，可能存在【读】、【读+写】、【写】这三种情况。

> 那如何解决上面的问题呢？
并发事务对数据的读操作不会产生并发问题，所以不用解决；
并发事务对数据的读+写，常规操作一般会对要操作的数据加锁来解决并发读+写可能产生的问题，MySQL的InnoDB实现了MVCC来更好地处理读写冲突，可以做到即使存在并发读写，也可以不用加锁，实现"非阻塞并发读"。
并发事务对数据的写操作，只能通过加锁(乐观锁/悲观锁)来解决。
到了这里，我们脑子里需要有这么个印象：MySQL实现的MVCC，主要是用于在并发读写的情况下，保证 “读” 数据时无需加锁也可以读取到数据的某一个版本的快照，好处是可以避免加锁，降低开销，解决了读写冲突，增大了数据库的并发性能。

